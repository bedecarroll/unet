!
! Cisco IOS Large Configuration Sample
! Generated for testing purposes
!
version 17.3
service timestamps debug datetime msec
service timestamps log datetime msec
service password-encryption
service sequence-numbers
!
hostname CORE-SW-01
!
boot-start-marker
boot-end-marker
!
enable secret 5 $1$abcd$XwTGxFrPNRJrFGBhJzPiK/
!
no aaa new-model
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
ip vrf VRF-MANAGEMENT
 rd 65001:100
 route-target export 65001:100
 route-target import 65001:100
!
ip vrf VRF-GUEST
 rd 65001:200
 route-target export 65001:200
 route-target import 65001:200
!
ip vrf VRF-VOICE
 rd 65001:300
 route-target export 65001:300
 route-target import 65001:300
!
ip domain-name example.com
ip domain-lookup
ip name-server 8.8.8.8
ip name-server 8.8.4.4
!
!
!
spanning-tree mode pvst
spanning-tree extend system-id
spanning-tree vlan 1-4094 priority 8192
!
!
!
!
vlan internal allocation policy ascending
!
vlan 10
 name MANAGEMENT
!
vlan 20
 name GUEST
!
vlan 30
 name VOICE
!
vlan 40
 name DATA
!
vlan 50
 name SERVERS
!
vlan 60
 name PRINTERS
!
vlan 70
 name IOT
!
vlan 80
 name SECURITY
!
vlan 90
 name BACKUP
!
vlan 100
 name STORAGE
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
interface Loopback0
 description Management Loopback
 ip address 192.168.1.1 255.255.255.255
 ip ospf 1 area 0
!
interface Loopback1
 description OSPF Router ID
 ip address 10.0.0.1 255.255.255.255
 ip ospf 1 area 0
!
interface GigabitEthernet0/0
 description Uplink to ISP
 ip address dhcp
 ip nat outside
 duplex auto
 speed auto
!
interface GigabitEthernet0/1
 description Connection to CORE-SW-02
 no switchport
 ip address 10.0.1.1 255.255.255.252
 ip ospf 1 area 0
 duplex full
 speed 1000
!
interface GigabitEthernet0/2
 description Connection to EDGE-SW-01
 no switchport
 ip address 10.0.1.5 255.255.255.252
 ip ospf 1 area 0
 duplex full
 speed 1000
!
interface GigabitEthernet1/0/1
 description Access Port - Management VLAN
 switchport access vlan 10
 switchport mode access
 switchport port-security
 switchport port-security maximum 2
 switchport port-security violation restrict
 switchport port-security mac-address sticky
 spanning-tree portfast
 spanning-tree bpduguard enable
!
interface GigabitEthernet1/0/2
 description Access Port - Guest VLAN
 switchport access vlan 20
 switchport mode access
 switchport port-security
 switchport port-security maximum 1
 switchport port-security violation shutdown
 spanning-tree portfast
 spanning-tree bpduguard enable
!
interface GigabitEthernet1/0/3
 description Access Port - Voice VLAN
 switchport access vlan 40
 switchport voice vlan 30
 switchport mode access
 switchport port-security
 switchport port-security maximum 3
 switchport port-security violation restrict
 switchport port-security mac-address sticky
 spanning-tree portfast
 spanning-tree bpduguard enable
!
interface GigabitEthernet1/0/4
 description Access Port - Data VLAN
 switchport access vlan 40
 switchport mode access
 switchport port-security
 switchport port-security maximum 2
 switchport port-security violation restrict
 switchport port-security mac-address sticky
 spanning-tree portfast
 spanning-tree bpduguard enable
!
interface GigabitEthernet1/0/5
 description Trunk Port to Access Switch
 switchport trunk encapsulation dot1q
 switchport trunk allowed vlan 10,20,30,40,50
 switchport mode trunk
 switchport nonegotiate
 spanning-tree guard root
!
interface GigabitEthernet1/0/6
 description Trunk Port to Distribution Switch
 switchport trunk encapsulation dot1q
 switchport trunk allowed vlan 10,20,30,40,50,60,70,80
 switchport mode trunk
 switchport nonegotiate
 spanning-tree guard root
!
interface Vlan10
 description Management VLAN Interface
 ip address 192.168.10.1 255.255.255.0
 ip helper-address 192.168.50.10
 ip ospf 1 area 0
 standby 10 ip 192.168.10.254
 standby 10 priority 110
 standby 10 preempt
!
interface Vlan20
 description Guest VLAN Interface
 ip address 192.168.20.1 255.255.255.0
 ip helper-address 192.168.50.10
 ip access-group GUEST-IN in
 ip ospf 1 area 0
 standby 20 ip 192.168.20.254
 standby 20 priority 110
 standby 20 preempt
!
interface Vlan30
 description Voice VLAN Interface
 ip address 192.168.30.1 255.255.255.0
 ip helper-address 192.168.50.10
 ip ospf 1 area 0
 standby 30 ip 192.168.30.254
 standby 30 priority 110
 standby 30 preempt
!
interface Vlan40
 description Data VLAN Interface
 ip address 192.168.40.1 255.255.255.0
 ip helper-address 192.168.50.10
 ip ospf 1 area 0
 standby 40 ip 192.168.40.254
 standby 40 priority 110
 standby 40 preempt
!
interface Vlan50
 description Server VLAN Interface
 ip address 192.168.50.1 255.255.255.0
 ip ospf 1 area 0
 standby 50 ip 192.168.50.254
 standby 50 priority 110
 standby 50 preempt
!
router ospf 1
 router-id 10.0.0.1
 log-adjacency-changes
 passive-interface default
 no passive-interface GigabitEthernet0/1
 no passive-interface GigabitEthernet0/2
 network 10.0.0.0 0.0.0.255 area 0
 network 10.0.1.0 0.0.0.255 area 0
 network 192.168.10.0 0.0.0.255 area 0
 network 192.168.20.0 0.0.0.255 area 0
 network 192.168.30.0 0.0.0.255 area 0
 network 192.168.40.0 0.0.0.255 area 0
 network 192.168.50.0 0.0.0.255 area 0
!
router bgp 65001
 bgp router-id 10.0.0.1
 bgp log-neighbor-changes
 neighbor 10.0.1.2 remote-as 65001
 neighbor 10.0.1.2 description CORE-SW-02
 neighbor 10.0.1.2 update-source Loopback0
 neighbor 10.0.1.6 remote-as 65002
 neighbor 10.0.1.6 description EDGE-SW-01
 neighbor 10.0.1.6 update-source Loopback0
 !
 address-family ipv4
  network 192.168.10.0 mask 255.255.255.0
  network 192.168.20.0 mask 255.255.255.0
  network 192.168.30.0 mask 255.255.255.0
  network 192.168.40.0 mask 255.255.255.0
  network 192.168.50.0 mask 255.255.255.0
  neighbor 10.0.1.2 activate
  neighbor 10.0.1.2 send-community
  neighbor 10.0.1.6 activate
  neighbor 10.0.1.6 send-community
 exit-address-family
!
ip forward-protocol nd
ip http server
ip http secure-server
!
ip nat inside source list 1 interface GigabitEthernet0/0 overload
!
ip access-list standard 1
 permit 192.168.10.0 0.0.0.255
 permit 192.168.20.0 0.0.0.255
 permit 192.168.30.0 0.0.0.255
 permit 192.168.40.0 0.0.0.255
 permit 192.168.50.0 0.0.0.255
!
ip access-list extended GUEST-IN
 remark Allow DHCP
 permit udp any any eq bootpc
 permit udp any any eq bootps
 remark Allow DNS
 permit udp any any eq domain
 permit tcp any any eq domain
 remark Allow HTTP and HTTPS
 permit tcp any any eq www
 permit tcp any any eq 443
 remark Allow NTP
 permit udp any any eq ntp
 remark Deny access to internal networks
 deny ip any 192.168.10.0 0.0.0.255
 deny ip any 192.168.30.0 0.0.0.255
 deny ip any 192.168.40.0 0.0.0.255
 deny ip any 192.168.50.0 0.0.0.255
 remark Allow internet access
 permit ip any any
!
!
logging trap debugging
logging facility local7
logging source-interface Loopback0
logging host 192.168.50.10
!
!
snmp-server community public RO
snmp-server community private RW
snmp-server location "Data Center Rack 1"
snmp-server contact "Network Admin <admin@example.com>"
snmp-server enable traps snmp authentication linkdown linkup coldstart warmstart
snmp-server enable traps config
snmp-server enable traps entity
snmp-server enable traps envmon
snmp-server host 192.168.50.10 version 2c public
!
!
control-plane
!
!
line con 0
 logging synchronous
 exec-timeout 5 0
!
line aux 0
!
line vty 0 4
 access-class 23 in
 privilege level 15
 login local
 transport input ssh
 exec-timeout 10 0
!
line vty 5 15
 access-class 23 in
 privilege level 15
 login local
 transport input ssh
 exec-timeout 10 0
!
!
ntp server 192.168.50.10
ntp server 192.168.50.11
ntp source Loopback0
!
!
end